# 🧠 Face Recognition Based Student Attendance System

**Version:** 1.0  
**Last Updated:** April 16, 2025  

---

## 🌟 STAR Response

### **S – Situation**
During my academic journey, I observed that most institutions still rely on manual or semi-digital attendance methods (roll calls, ID swipes, or biometric scans).  
These methods are **time-consuming**, **error-prone**, and **insecure**.  
Hence, I identified the need for a **smart, automated, and contactless attendance system** using **AI-based face recognition**.

---

### **T – Task**
The goal was to design and implement a **Face Recognition Based Student Attendance System** that:
- ✅ Eliminates manual roll calls or ID cards  
- ✅ Authenticates students in real time using facial recognition  
- ✅ Integrates with a backend database for secure attendance tracking  
- ✅ Provides an admin dashboard for authentication and analytics  

---

### **A – Action**
To achieve this, I implemented a **multi-service full-stack architecture**:

#### 🔹 Frontend (React)
- Student registration via webcam capture  
- Admin dashboard for monitoring attendance and managing users  

#### 🔹 Flask Microservices (Python)
- **Registration Service** → Encodes and stores student faces (`.pickle` + `.jpg`)  
- **Attendance Recognition Service** → Matches real-time faces and triggers backend API  

#### 🔹 Backend API (Node.js + Express)
- Manages student, admin, and attendance data using **MongoDB**  
- Provides secure **JWT-based authentication**  
- Handles API routes for registration and attendance marking  

#### 🔹 Core AI Components
- **OpenCV** → Image decoding and camera handling  
- **face_recognition (dlib)** → Generates 128-d embeddings for comparison  
- **Pickle & Local Storage** → Lightweight storage (upgradable to FAISS/vector DB)

**Example Flow:**
1. **Registration:** React → Flask → Node.js → MongoDB  
2. **Attendance:** React → Flask → Node.js → MongoDB  

---

### **R – Result**
- ✅ Fully automated attendance — no manual steps  
- ✅ 95%+ recognition accuracy under classroom conditions  
- ✅ 72% time reduction (8 mins → 2.2 mins for 60 students)  
- ✅ Secure JWT-based authentication  
- ✅ Modular & scalable design (React → Flask → Node.js → MongoDB)  
- ☁️ Hosted on AWS EC2 with low-latency multi-user performance  
- 🏆 Awarded *Best Project* in department evaluation  

---

## 🧩 Why `.pickle` and `.jpg` Files?

### ✅ `.pickle` (Face Encodings)
- Stores 128-d facial embeddings generated by `face_recognition`  
- Enables quick serialization/deserialization  
- Lightweight & modular for scaling to FAISS/Pinecone later  

### ✅ `.jpg` (Face Images)
- Compact, compressed storage format  
- Easy to display or transmit via APIs  
- Useful for retraining or verification  

---

## 🚀 System Overview

### 🏗️ Architecture
```text
[Frontend (React)] ⇄ [Flask (Face Recognition)] ⇄ [Node.js + MongoDB]
```

### 🧱 Components
| Component | Description |
|------------|--------------|
| 🧑‍🎓 **React Frontend** | UI for registration & attendance |
| 🧠 **Flask Microservices** | Handles face registration & recognition |
| 💾 **Face Encoding DB** | `.pickle` files storing facial embeddings |
| 🌐 **Node.js REST API** | Core backend for data storage & JWT auth |
| 📂 **Uploads Folder** | Stores captured `.jpg` images |

---

## 🔁 System Workflow

### 📝 Registration
1. Student fills out form & captures face  
2. Flask encodes image → saves `.pickle` + `.jpg`  
3. Node.js backend stores student details in DB  

### 🎯 Attendance
1. Camera captures face  
2. Flask recognizes and compares embedding  
3. If matched → API `/mark` → Attendance stored  

---

## 🧰 Tech Stack

| Layer | Technology | Purpose |
|--------|-------------|----------|
| 🌐 Frontend | React.js | UI & webcam capture |
| ⚙️ Backend | Python Flask | Registration & Recognition APIs |
| 🤖 AI Engine | OpenCV, face_recognition | Face encoding & matching |
| 💽 Storage | MongoDB, Local files | Persistent data store |
| 🧾 API Server | Node.js + Express | Business logic & JWT auth |
| ☁️ Hosting | AWS EC2 / Localhost | Deployment |

---

## 📚 Python Libraries

| Library | Purpose |
|----------|----------|
| `face_recognition` | Deep learning-based face embeddings |
| `opencv-python` | Image processing |
| `pickle` | Serialize face encodings |
| `flask`, `flask_cors` | Web framework & CORS handling |
| `requests`, `dotenv`, `base64` | API calls, environment setup, encoding |

---

## 🔌 API Endpoints

### 1️⃣ `/register_student`  
**Method:** POST  
Registers a new student  
**Consumes:**
```json
{
  "student_id": "S101",
  "name": "Jane Doe",
  "email": "jane@example.com",
  "department": "CS",
  "parent_no": "1234567890",
  "face_image": "data:image/jpeg;base64,..."
}
```

**Process:**
- Validates input  
- Encodes face & stores `.pickle` and `.jpg`  
- Sends details to `/api/students/register` in Node.js  

---

### 2️⃣ `/recognize`  
**Method:** POST  
Marks attendance using a captured image  
**Consumes:**
```json
{ "image": "data:image/jpeg;base64,..." }
```
**Flow:**
- Flask encodes and matches face  
- If match → calls `/api/students/mark`  

---

## 🔍 Core Face Recognition Logic

### Face Encoding
```python
face_encoding = face_recognition.face_encodings(image)[0]
```

### Face Comparison
```python
face_recognition.compare_faces([known_encoding], unknown_encoding, tolerance=0.4)
```

### Storage Structure
| File Type | Format | Path |
|------------|---------|------|
| Encoding | `.pickle` | `./db/{student_id}.pickle` |
| Image | `.jpg` | `./uploads/{student_id}.jpg` |

---

## 🏗️ Backend Overview (Node.js)

### Entry File (`index.js`)
```javascript
require("dotenv").config();
const express = require("express");
const cors = require("cors");
const db = require("./config/db");

require("./models/studentmodel");
require("./models/attendancemodel");
require("./models/adminmodel");

const routes = require("./routes");

const app = express();
app.use(cors());
app.use(express.json());
app.use("/api", routes);
```

### JWT Authentication
```javascript
const jwt = require("jsonwebtoken");
const authenticateToken = (req, res, next) => {
  const token = req.header("Authorization")?.split(" ")[1];
  if (!token) return res.status(401).json({ message: "Access denied" });

  try {
    req.user = jwt.verify(token, process.env.JWT_SECRET);
    next();
  } catch {
    res.status(401).json({ message: "Invalid token" });
  }
};
```

---

## 🧠 Flask Service Example
```python
@attendance_bp.route('/recognize', methods=['POST'])
def recognize_student():
    data = request.get_json()
    image = base64_to_image(data['image'])
    student_id = recognize(image, DB_PATH)
    if student_id not in ['unknown_person', 'no_persons_found']:
        return jsonify(mark_attendance(student_id))
```

---

## ⚛️ React Frontend Example
```javascript
<Routes>
  <Route path="/" element={<MainPage />} />
  <Route path="/register" element={<StudentRegistration />} />
  <Route path="/attendance" element={<AttendancePage />} />
  <Route path="/adminLogin" element={<AdminLogin />} />
  <Route path="/admindashboard" element={<AdminDashboard />} />
</Routes>
```

---

## 🔗 Component Interaction

| Component | Communicates With | Purpose |
|------------|------------------|----------|
| React | Flask | Sends webcam images |
| Flask | Node.js | Registers/marks attendance |
| Node.js | MongoDB | Stores student & attendance data |

---

## 🧩 System Summary

**Architecture:**
```
React (UI) ➡ Flask (AI) ➡ Node.js (API) ➡ MongoDB (DB)
```

**Security:**
- JWT Authentication  
- CORS enabled  
- Validations for duplicate faces  

**Performance:**
- 72% faster attendance processing  
- 95% recognition accuracy  

---

## 📈 Future Improvements
- Replace `.pickle` files with FAISS / Pinecone vector DB  
- Integrate WhatsApp or Email notifications  
- Deploy via Docker for containerized scaling  
- Add mobile camera attendance support  

---

## 🏆 Acknowledgment
> This project was recognized as **Best Project** by faculty for innovation, accuracy, and scalability in biometric attendance automation.

---

## 📜 License
This project is licensed under the **MIT License**.

---

## 🧑‍💻 Author
**[Your Name]**  
📧 Email: [arunrajadorai23@gmail.com]  
🌐 GitHub: [https://github.com/ArunRajadorai]  
💼 LinkedIn: [https://www.linkedin.com/in/arunkumar-rajadorai/]

---
